# Layout


进入到 this.refresh 的断点调试，发现代码执行在 core/layout.js 里。

通过代码的注释我们可以得知这部分就是脑图整体的布局了。


再继续通过断点调试，我们可以发现。具体的 render 方法在 core/render.js  中

将嵌套的结构转换成平铺的数组。

嵌套结构如何转成平铺？其实002 中有提到。先标记下。

节点先渲染在了 DOM 上，但此时位置都不正确。还是需要通过布局算法调整。


## 具体的布局规则

分成两部分布局。
左子树布局
右字树布局

如何找到是 btree 的？
btree.js